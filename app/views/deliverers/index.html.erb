<div class="container">
  <div class="row bottom-buffer">
    <div class="col-md-offset-2 col-md-8">

      <%= render "shared/flash_messages" %>

      <h1>All deliverers</h1>

    </div>
  </div>

  <div class="row bottom-buffer">

    <%= search_form_for @query, url: deliverers_path, method: :get do |f| %>
      <div class="col-md-offset-2 col-md-2">
        <%= f.text_field :name_cont, placeholder: 'Name', class: 'form-control' %>
      </div>

      <div class="col-md-2">
        <%= f.text_field :phone_cont, placeholder: 'Phone', class: 'form-control' %>
      </div>

      <div class="col-md-2">
        <%= f.select :vehicle_eq,
              Deliverer.vehicles.keys.map { |k|
                [k.capitalize, Deliverer.vehicles[k]]
              }.unshift(["Vehicle", ""]), { :include_blank => false }, :class => "form-control" %>
      </div>

      <div class="col-md-2">
        <%= f.select :active_eq,
              Deliverer.statuses.keys.map { |k|
                [k.capitalize, Deliverer.statuses[k]]
              }.unshift(["Status", ""]), { :include_blank => false }, :class => "form-control" %>
      </div>

      <div class="col-md-offset-2 col-md-8">
        <%= f.submit 'Filter', class: 'btn sign-up-button' %>
      </div>

      <input name="limit" value="<%= @limit %>" type="hidden">
    <% end %>

  </div>


  <div class="row">
    <div class="col-md-offset-2 col-md-8">
      <div id="table">
        <%= render 'deliverers_table'%>
      </div>
    </div>
  </div>

  <div class="row">
    <div class="col-md-offset-2 col-md-6">
      <%= page_entries_info @deliverers %>
    </div>

    <div class="col-md-2">
      <%= form_tag deliverers_path, method: :get, id: 'limit_form' do %>
        <label>Per Page</label>

        <%= select_tag :limit, options_for_select([10, 25, 50, 100], selected: @limit) %>

        <% if params.has_key?(:query) %>
          <%= hidden_field_tag "query[name_cont]", "#{params[:query][:name_cont]}" %>
          <%= hidden_field_tag "query[phone_cont]", "#{params[:query][:phone_cont]}" %>
          <%= hidden_field_tag "query[vehicle_eq]", "#{params[:query][:vehicle_eq]}" %>
          <%= hidden_field_tag "query[active_eq]", "#{params[:query][:active_eq]}" %>
        <% end %>
      <% end %>

      <script type="text/javascript" >
        $('#limit').change(
          function() {
            $('#limit_form').submit();
        });
      </script>
    </div>
  </div>

  <div class="row bottom-buffer">
    <div class="col-md-offset-2 col-md-8">
      <%= paginate @deliverers, window: 1, left: 1, right:1 %>
    </div>
  </div>



</div>
